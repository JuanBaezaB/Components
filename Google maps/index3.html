<!DOCTYPE html>
<html style="height:100%">

<head>
    <title>Marker draggable en Google Maps</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
        #divMap {
            height: 500px;
            width: 800px;
            border-radius: 15px;
            margin: 100px auto;
        }
    </style>
</head>

<body>
    <div id="divMap"></div>
    <center>
        <div class="mb-3">
            <label class="col-form-label">Dirección (opcional):</label>
            <input type="text" class="form-control @error('address') is-invalid @enderror" id="autocomplete_search"
                name="address">
        </div>
        <div class="mb-3">
            <input class="form-control" name="longitude" id="longitude">
        </div>
        <div class="mb-3">
            <input class="form-control" name="latitude" id="latitude">
        </div>

        
        
    </center>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJo0d84q3_W-zY6-m9_QJGa1UTY_vn2es&libraries=places"></script>

    <script >
         google.maps.event.addDomListener(window, 'load', function () {
            initialize();
        });

        function initialize() {
            // Configuración del mapa
            var mapProp = {
                center: new google.maps.LatLng(6.244338, -75.573553),
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            // Agregando el mapa al tag de id divMap
            var map = new google.maps.Map(document.getElementById("divMap"), mapProp);

            // Creando un marker en el mapa
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(6.244338, -75.573553),
                map: map,
                title: 'Hello World!',
                draggable: true //que el marcador se pueda arrastrar
            });

            

            google.maps.event.addListener(marker, 'drag', function (event) {
                console.log(event.latLng.lat());
                $('#latitude').val(event.latLng.lat());
                $('#longitude').val(event.latLng.lng());
                
            });

        }

       
    </script>
</body>

</html>